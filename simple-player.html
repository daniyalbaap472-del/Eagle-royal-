<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Shaka Player Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Shaka Player UI library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.ui.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/controls.min.css" />
    <style>
      body {
        margin: 0;
        background: #000;
        color: white;
      }
      #video-container {
        width: 100vw;
        height: 100vh;
        position: relative;
      }
    </style>
  </head>
  <body>
    <div id="video-container">
      <video autoplay muted controls data-shaka-player id="video" style="width: 100%; height: 100%;"></video>
    </div>

    <script>
      document.addEventListener('shaka-ui-loaded', async () => {
        const video = document.getElementById('video');
        const ui = video['ui'];
        const player = ui.getControls().getPlayer();

        // Optional: Listen for errors
        player.addEventListener('error', (e) => {
          console.error('Error code', e.detail.code, 'object', e.detail);
        });

        // DRM config (optional: use if your stream is encrypted with ClearKey)
        await player.configure({
          drm: {
            clearKeys: {
              // Replace with your own key ID and key
              '1a2b3c4d5e6f77889900aabbccddeeff': '0123456789abcdef0123456789abcdef'
            }
          }
        });

        // Load a DASH manifest URL
        const manifestUri = 'https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd'; // or your own

        try {
          await player.load(manifestUri);
          console.log('The video has now been loaded!');
        } catch (e) {
          console.error('Error loading video:', e);
        }
      });
    </script>
  </body>
</html>
